#什么是中间件
在网站后台,往往存在很多的应用服务,对应的是我们操作系统驱动硬件来提供对应的服务, 那么 应用与应用之间的调用, 应用于操作系统/硬件之间的交互, 这样会导致代码层次不够明确, 代码耦合程度高, 我们需要一个东西来代理我们的请求, 让应用只负责业务的逻辑处理. 这样就出现了中间件. 它可以处理与操作系统之间的调用, 这样代码层次明确, 耦合度就低
##Nginx简述
Nginx是一个开源且高性能, 可靠的HTTP中间件,代理服务.

## 为什么选择nginx
1. IO多路复用epoll
IO复用解决并发性的问题, 当处理多个并发的请求,对于多个中间件就要产生多个IO流,对于系统的读写.就串行处理和并行处理2种方式. 这时候必须使用并行的方式来实现整个IO流的请求,以实现最大的并发和吞吐. 这时候就需要使用IO复用, 它使用了一个socket来作为复用完成整个IO流的请求. 多线程就是其中的一种. 还有就是IO多路复用. 对操作系统内核而言,IO多路复用其实就是要完成操作系统的IO的请求. 对IO的请求还没有就绪时候,应用程序就在等待, 直到IO请求就绪会主动告诉应用程序,类似于JS回调函数, 这就是IO多路复用的方式 

多个描述符的IO操作都能在一个线程内并发交替地顺序完成, 这就叫IO多路复用, 这里的"复用"指得是复用同一个线程

IO多路复用的实现方式 select, poll, epoll, selec t性能比较低下,  epull模型效率高

2. 轻量级
功能模块少, 代码模块化

3. CPU亲和
Nginx正是利用到了CPU亲和, 来提升它的并发处理能力和对于CPU的工作执行效率, 减少不必要的额外性能损耗.
为什么要利用到CPU亲和, 当今的服务器, 一般都是  4核  32核  64核,这种多核的服务器,一般做为多线程工作, 密集计算型的服务里面去使用. nginx有多个不同work的进程, 假设有个服务器有2个CPU, 每个CPU有4个核心, 把Nginx的8个进程分别绑定到CPU上, 均匀分配, 减少CPU额外的切换的性能损耗(cache miss), 获得更好的性能

4. sendfile
我们知道Nginx在处理静态资源的效率上是非常有优势的, 是因为nginx采用了sendfile的机制. 当http要去操作文件的时候, 他要经过操作系统的内核空间和用户空间, 最终到达socket, 然后再返回response给用户, 静态文件不需要经过用户空间的逻辑处理, 直接就可以通过内核空间进行传输 